<!Doctype html>
<html>
<head>
	<meta charset utf="utf-8">
<META HTTP-EQUIV="Pragma" CONTENT="no-cache">
	<script src="http://d3js.org/d3.v3.min.js" charset="utf-8">
	</script>
</head>


<body>
	<script>

var width = 750;
var height = 500;
var svg = d3.select("body").append("svg")
    .attr("width", width)
    .attr("height", height);

d3.json("bmorecrime.json", function(error, root) {

	var xCoord = function (c) {
		if (c[1] == null) {
			return -50;
		}
		return (parseFloat(c[1]) - 39) * 3000 - 570;
	}

	var yCoord = function (c) {
		if (c[2] == null) {
			return -50;
		}

		return (parseFloat(c[2]) + 77) * 3000 - 900;
	}

	var dotcolor = function (d) {
			if (d[11] === "B") {
					var hue = parseInt(d[9])+ 20;
					return "rgb(" + hue + "," + hue + "," + hue + ")";
			} else {
					var hue = 235 - parseInt(d[9]);
					return "rgb(" + hue + "," + hue + "," + hue + ")";
			}
	}

	var circles = svg.selectAll("circle")
					.data(root.data);
			circles
					.enter()
					.append("circle")
						.attr("cx", function(d,i) {
							return xCoord(d[22]); } )
						.attr("cy", function(d) { 
							console.log(xCoord(d[22]), yCoord(d[22]))	; 
							return yCoord(d[22]); } )
						.attr("r", function(d) { return 3.5; })
						.style("fill", dotcolor)
						.on("mouseover", 
							function() {
								d3.select(this).style("fill", "yellow");
								info = d3.select(this).data()[0][18];
								d3.select(this).selectAll('title').remove();
								d3.select(this).append("svg:title").text(function(){ return info; });
							})
						.on("mouseout", 
							function(){
								d3.select(this).style("fill", dotcolor);
							});

	circles.exit().remove();
});

</script>




</body>



</html>